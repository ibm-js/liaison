<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="../css/examples.css">
		<script type="text/javascript" src="../../../requirejs/require.js" data-main="../../../"></script>
		<script id="swap-template" type="text/x-template">
			<div>
				<div>
					<template repeat="{{data}}">
						<input type="button" value="{{title}}" onclick="ctrl.select('{{title}}');">
					</template>
				</div>
				<template repeat="{{current}}">
					<div>First: <input type="text" value="{{First}}"></div>
					<div>Last: <input type="text" value="{{Last}}"></div>
				</template>
			</div>
		</script>
		<script type="text/javascript">
			var ctrl;

			require([
				"dcl/dcl",
				"delite/register",
				"delite/Widget",
				"liaison/wrapper",
				"liaison/delite/createRenderer"
			], function(dcl, register, Widget, wrapper, createRenderer){
				function startup(){
					register("liaison-example-swap", [HTMLElement, Widget], {
						buildRendering: createRenderer(document.getElementById("swap-template").innerHTML),
						baseClass: "liaison-example-swap",
						data: wrapper.wrap([
							{
								title: "Model1",
								names: [
									{
										First: "Anne1",
										Last: "Ackerman1"
									},
									{
										First: "Ben1",
										Last: "Beckham1"
									},
									{
										First: "Chad1",
										Last: "Chapman1"
									}
								]
							},
							{
								title: "Model2",
								names: [
									{
										First: "Anne2",
										Last: "Ackerman2"
									},
									{
										First: "Ben2",
										Last: "Beckham2"
									}
								]
							},
							{
								title: "Model3",
								names: [
									{
										First: "Anne3",
										Last: "Ackerman3"
									}
								]
							}
						]),
						select: function(title){
							this.set("current", this.data.filter(function(entry){
								return entry.title == title;
							})[0].names);
						},
						createdCallback: dcl.superCall(function(sup){
							return function(){
								this.current = this.data[0].names;
								sup && sup.apply(this, arguments);
							};
						})
					});
					register.parse();
					ctrl = document.querySelector("liaison-example-swap");
				}

				document.body ? startup() : window.addEventListener("DOMContentLoaded", startup);
			});
		</script>
	</head>
	<body>
		<liaison-example-swap></liaison-example-swap>
	</body>
</html>
